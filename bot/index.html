<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Custom Launcher Demo</title>
  <style>
    /* your custom launcher styling */
    #custom-launcher {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #0073e6;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 50%;
      font-size: 18px;
      cursor: pointer;
      display: none;    /* hidden until widget is ready */
    }
  </style>

  <!-- 1) Load the Genesys Web Messenger widget -->
  <script>
    window.genesys = {
      widgets: {
        main: { debug: false },
        webMessaging: {
          transport: {
            type:     'purecloud-v2-sockets',
            dataURL:  'https://api.mypurecloud.jp',
            deploymentId: 'd7a4ab4b-5374-48dc-abff-20e94d283345'
          }
        }
      }
    };
    (function(){
      var s = document.createElement('script');
      s.src = 'https://apps.mypurecloud.jp/widgets/genesys.min.js';
      s.async = true;
      document.head.appendChild(s);
    })();
  </script>
</head>
<body>

  <!-- 2) Your custom launcher button -->
  <button id="custom-launcher">ðŸ’¬</button>

  <script>
    const launcher = document.getElementById('custom-launcher');
    let isOpen = false;

    // 3) Show the launcher once the messenger is ready
    Genesys('subscribe', 'Messenger.ready', () => {
      launcher.style.display = 'block';
    });

    // 4) Keep track of open/close so your icon can toggle
    Genesys('subscribe', 'Messenger.windowOpened', () => {
      isOpen = true;
      launcher.textContent = 'ðŸ”½';    // arrow down when open
    });
    Genesys('subscribe', 'Messenger.windowClosed', () => {
      isOpen = false;
      launcher.textContent = 'ðŸ’¬';    // chat bubble when closed
    });

    // 5) Wire up your button to show/hide the widget
    launcher.addEventListener('click', () => {
      if (isOpen) {
        Genesys('command', 'Messenger.hide');
      } else {
        Genesys('command', 'Messenger.show');
      }
    });
  </script>
</body>
</html>
